# 現状の観察
## 値
| best score | 3,291.62	| 3,778.72	| 4,494.42	| 8,233.56	| 10,635.22	| 21,191.89	| 42,187.11
| ----	| ----	| ----	| ----	| ----	| ----	| ---- | ---- |
| greedy | 3,418.10  |  3,832.29 | 5,449.44 | 10,519.16 | 12,684.06 | 25,331.84 | 49,892.05 |
| sa  | 3,291.62  |  3,778.72 | 4,494.42 | 8,150.91 | 10,675.29 | 21,119.55 | 44,393.89 |
- greedy は　best scoreとオーダーはおなじで，一桁目は一緒
- -> 今回のデータセットに対しては，greedyを改変することで，best scoreに近づけることができそう！
## 図
![貪欲法i=3](image.png)

- 交差がある
    -  -> 交差をなくせばよい
    - -> 交差を見つけて，swapすればいい
    - 交差をみつける
        - ふわっと）線を新たに引くとき，今までのものに交わっていたら，
        - 実装）今までのエッジを保持しておいて，greedy法により，AからBへ線をあらたに引こうとするとき，線分ABと交わるエッジが今までのエッジの中にあるかどうか調べる。（複数あるかもしれない）
    - swapする
        - ふわっと）対角線がきまっている台形の，向かい合う二辺は二組あるが，一方を選ぶと島が途切れてしまう場合があるのが避けたいこと。
        - 実装）線分A->Bを引くとき，もとのエッジC->Dに被ってしまったとする。...C,D.....A,Bのかわりに，...C,A....D,Bとするのに加えて，AとDの間におとずれていたエッジをひっくり返す必要がある。そして，エッジの集合を更新する。交差が複数生じた場合は，そもそも厳密解ではなくヒューリスティックなので初めに見つけた方を選んでも良いし，もしくは，交差がなくなるまで，swapを続けても良い
- 帰りが長い
    - 反対向きに辿って重ね合わせる？
# 行ったこと
1.  貪欲法を用いて経路を探す。あたらしいノードをpathに加える際，今までのエッジEi(node_s,node_e)を見ていき，
distance(node_s,node_e)+distance(あたらしいエッジ)と，
distance(node_s,一つ前のノード)+distance(node_e,あたらしいノード)を比較して，
後者の方が短ければ経路を繋ぎ変える。
![貪欲法+工夫i=3](image2.png)
※実装上，完全に交差をなくしているわけではない。順に見て，交差を解消したほうが改善されるときのみ解消している。

2.  焼き鈍し法
ある経路に対し，エッジを取り替える変更を行ったもののなかで，経路が短いものkこをk近傍と呼ぶ。
そのなかからランダムに経路を選び，以前と改善されていれば変更，以前より改悪でも一定の割合で採用する。
