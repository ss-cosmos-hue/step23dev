# 電卓プログラム
## 実行方法
`$ python3 modularized_calculator.py`
電卓関数がテストケースに適用される。
また，テストケースが全て走った後，> の後に電卓関数の引数としたい任意の式1行をかき，`Enter`を押すと，結果が反る。
## 概要
数式の文字列を与えられると，数式として評価し，対応する値を返す。
与える式には以下を使える。
- 数字      0 ~ 9
- 演算子    + - * /   
- 括弧      ( )
- 関数      abs() int() round()

与式は上記の記号の組み合わせであり，かつ，かっこは，開き括弧と閉括弧がこの順にペアで存在することを想定している。
## アルゴリズム
- tokenize  
与えられた文字列を，数値(入力に応じて，小数値も扱う。ex. 入力"1.5"は小数の数値1.5として扱う)，演算子，括弧，関数名のtokenに切り分ける
- evaluate  
括弧を探し，内部の式を評価して，tokenを更新することを繰り返す。
括弧がなくなるまで続けて，最終的に数値を返す。
  - 括弧の評価  
    括弧は階層構造になっており，(ex. `(())()`),一番内部にある開き括弧と閉括弧のペアに着目する。着目する括弧の中の式を，`括弧の内部の式の評価`の項目に従い数値に変換する。与えられたtokensの，着目した括弧とその内部のtokenを，数値tokenに更新する。
  - 関数の括弧であるとき  
  着目する括弧の前に関数名の文字列があるときは，前項で算出した数値を引数とした関数の返り値を数値のtokenに変換する。そして，元のtokensの，関数から閉括弧までを数値のtokenに更新する。
  - 括弧の内部の式の評価  
  演算子の優先度に従い，除算，乗算，加算or減算の順に評価し，tokensを更新する。
    - 除算を評価するときは，tokenを順に見ていき，数値tokenの次が除算記号であれば，"除算記号,数値token"のペアが続く間，除算の計算を続ける。計算した箇所のtokensを，計算結果の数値tokenに更新する。乗算も同様。
    - 次に，除算記号token,乗算記号tokenのないtokensの加算と減算を評価する。tokenを順に見ていき，数値tokenがあれば，前の演算子に応じて，加算または減算を実行する

## 例
`round(abs(2.3-3)*(round(3.2*56-100)+int(3.0*5/6)))`   
→(2.3-3)の括弧を評価すると-0.7  
→括弧の前にabs関数があるので，関数の返り値0.7に更新する  
`round(0.7)*(round(3.2*56-100)+int(3.0*5/6)))`  
→初めに見つかる最内部の括弧は，(0.7)  
→括弧の前のround関数を摘要する  
`1.0*(79.0+int(3.0*5/6)))`   
->int(~)を評価   
`1.0*(79.0+2.0)`  
`1.0*81.0`  
=>81